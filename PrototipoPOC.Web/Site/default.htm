<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
    <style type="text/css">
        html
        {
            overflow-y:scroll;
            font:75% Arial,Helvetica,sans-serif;
        }

        #app {

            width: 500px;
        }
    </style>
    <link href="Content/kendo/2013.1.319/kendo.common.min.css" rel="stylesheet" />
    <link href="Content/kendo/2013.1.319/kendo.default.min.css" rel="stylesheet" />
    <script src="Scripts/jquery-1.9.1.min.js"></script>
    <script src="Scripts/underscore.min.js"></script>
    <script src="Scripts/mustache.js"></script>
    <script src="Scripts/backbone.min.js"></script>
    <script src='Scripts/kendo/2013.1.319/kendo.web.min.js'></script>
    <script src='Scripts/kendoBackboneExtensions/kendo.backbone.collection.js'></script>
    <script src='Scripts/kendoBackboneExtensions/kendo.backbone.model.js'></script>
    <script src='Scripts/kendoBackboneExtensions/kendo.backbone.datasource.js'></script>
    <script data-name="templatePessoas" src='Content/mustacheTemplates/pessoas.html' type='x-mustache-template'></script>
    <script data-name="templatePessoa" src='Content/mustacheTemplates/pessoa.html' type='x-mustache-template'></script>
    <script src="Scripts/App.js"></script>
    <script>
        window.templates = {};
        $(function () {

               //caching the mustache templates
                var i, templates = $("script[type=x-mustache-template]");
                for (i = 0; i < templates.length; i += 1) {
                    template = templates[i];
                    $.get(template.src, (function (template, templateIndex) {
                        var name = $(template).data('name');

                        return function (content) {
                            console.log(template, name);
                            window.templates[name] = content;
                            if (templates.length === templateIndex + 1)
                                $(document).trigger("templateCacheCompleted");

                        }
                    }(template, i))
                    );
                }
        

                $(document).on("classInitialize", function () {

                    InterfilePrototipoApp.start();
                    /*var pessoas = new InterfilePrototipoApp.Collections.Pessoas();
                    pessoas.fetch({
                        success: function () {
                            var bootstrap = {};
                            bootstrap.pessoas = pessoas;
                            InterfilePrototipoApp.start(bootstrap);
                        }
                    });*/
                   
                });
                
            
          

        });

    </script>
</head>
    <body id="app">

    </body>
</html>
